# Plan de Migration GeneWeb OCaml vers Python

## üéØ **Vue d'ensemble**

Ce document pr√©sente le plan complet de migration du projet GeneWeb d'OCaml vers Python, organis√© en **√©piques** (milestones) avec des issues petites et homog√®nes. Chaque issue inclut : objectif et crit√®res d'acceptation.

## üìã **√âpiques de Migration**

### **0) Initialisation et standards** ‚úÖ **TERMIN√â**

#### **Issue #1 : Mettre en place pyproject, arborescence, venv et deps**
- **Objectif** : Structure de base du projet Python
- **Acceptation** : `pyproject.toml`, `src/geneweb/`, `tests/`, venv OK, `install -e` OK
- **Statut** : ‚úÖ **TERMIN√â**

#### **Issue #2 : Configurer Ruff/Mypy/Pytest/Pre-commit**
- **Objectif** : Outils de qualit√© de code
- **Acceptation** : `ruff format + lint` OK, `mypy` OK, `pytest` OK, hooks install√©s
- **Statut** : ‚úÖ **TERMIN√â**

#### **Issue #3 : Pipeline CI (lint + mypy + tests)**
- **Objectif** : Int√©gration continue automatis√©e
- **Acceptation** : workflow GitHub vert sur PR ; matrice Python 3.11/3.12
- **Statut** : ‚úÖ **TERMIN√â**

### **1) Pont OCaml et tests de fum√©e (oracle)** ‚úÖ **TERMIN√â**

#### **Issue #4 : Bridge subprocess vers binaires OCaml**
- **Objectif** : Interface Python vers binaires OCaml
- **Acceptation** : ex√©cuter `gwb2ged`, `ged2gwb`, `gwd` via env `GENEWEB_OCAML_ROOT`, timeouts/erreurs g√©r√©s
- **Statut** : ‚úÖ **TERMIN√â**

#### **Issue #5 : Test smoke parit√© gwb2ged (demo.gwb)**
- **Objectif** : Validation de parit√© fonctionnelle
- **Acceptation** : test passe/skip si demo manquante ; GEDCOM commence par `HEAD`
- **Statut** : ‚úÖ **TERMIN√â**

#### **Issue #6 : Doc d'utilisation (README + ADR "strangler fig")**
- **Objectif** : Documentation strat√©gique et utilisateur
- **Acceptation** : README clair ; 1 ADR expliquant la strat√©gie de migration
- **Statut** : ‚úÖ **TERMIN√â**

### **2) CLI et API squelette** ‚úÖ **TERMIN√â**

#### **Issue #7 : CLI Typer de base (gwb2ged, ged2gwb via bridge)**
- **Objectif** : Interface ligne de commande moderne
- **Acceptation** : `geneweb gwb2ged -i ‚Ä¶ -o ‚Ä¶` fonctionne ; codes retour mapp√©s
- **Statut** : ‚úÖ **TERMIN√â**

#### **Issue #8 : API FastAPI minimale (healthz + export proxy)**
- **Objectif** : Interface web API de base
- **Acceptation** : `/healthz` OK ; `/export/gwb2ged?input_dir=‚Ä¶` renvoie stdout ou erreur
- **Statut** : ‚úÖ **TERMIN√â**

### **3) Caract√©risation approfondie de gwb2ged (tests de parit√©)** üìÖ **PLANNIFI√â**

#### **Issue #9 : Fixtures d'entr√©e GWB (petites, moyennes, cas tordus)**
- **Objectif** : Jeu de donn√©es de test vari√©
- **Acceptation** : dossier fixtures versionn√© ; README sur la provenance
- **Statut** : ‚úÖ **TERMIN√â**

#### **Issue #10 : Snapshots GEDCOM (normalis√©s)**
- **Objectif** : Tests de r√©gression automatis√©s
- **Acceptation** : tests qui comparent sortie OCaml vs snapshots avec normalisation espaces/ordre

#### **Issue #11 : Benchmarks de base (temps/m√©moire)**
- **Objectif** : M√©triques de performance de r√©f√©rence
- **Acceptation** : `pytest-benchmark` sur 2-3 fixtures ; seuils et rapport

### **4) Portage Python de gwb2ged (par √©tapes atomiques)** üìÖ **PLANNIFI√â**

#### **Issue #12 : Mod√®les de domaine (individus, familles, √©v√©nements, sources)**
- **Objectif** : Structure de donn√©es pour la logique m√©tier
- **Acceptation** : dataclasses/typing Pydantic pour I/O ; mypy OK

#### **Issue #13 : Lecture GWB minimal (index + individus basiques)**
- **Objectif** : Parser GWB de base
- **Acceptation** : charger noms/ids/sexes ; test unitaire sur petite fixture

#### **Issue #14 : S√©rialisation GEDCOM minimal (HEAD, INDI avec NOM/SEX)**
- **Objectif** : G√©n√©rateur GEDCOM de base
- **Acceptation** : g√©n√©rer GEDCOM valide ; snapshot de parit√© partielle passe

#### **Issue #15 : √âv√©nements vitaux (BIRT/DEAT avec dates/lieux)**
- **Objectif** : Support des √©v√©nements de naissance et d√©c√®s
- **Acceptation** : parit√© sur ces champs ; tests props sur dates

#### **Issue #16 : Familles et liens (FAM, HUSB/WIFE/CHIL)**
- **Objectif** : Structure des familles et relations
- **Acceptation** : structure FAM correcte ; parit√© structurelle

#### **Issue #17 : Notes, sources et m√©dias (NOTE/SOUR/OBJE) ‚Äî si pertinents**
- **Objectif** : M√©tadonn√©es et m√©dias
- **Acceptation** : champs support√©s avec fallback propre si manquants

#### **Issue #18 : Encodage/Unicode/normalisation**
- **Objectif** : Gestion robuste des caract√®res sp√©ciaux
- **Acceptation** : sorties UTF‚Äë8 stables ; tests sur caract√®res sp√©ciaux

#### **Issue #19 : Comparateur complet Python vs OCaml (diff lisible)**
- **Objectif** : Outil de validation de parit√©
- **Acceptation** : outil qui met en √©vidence diff√©rences s√©mantiques

#### **Issue #20 : Bascule CLI/API gwb2ged sur impl Python (feature flag)**
- **Objectif** : Migration progressive avec rollback
- **Acceptation** : flag env/CLI pour choisir Python ou OCaml ; default=OCaml

### **5) Portage Python de ged2gwb (m√™mes √©tapes sym√©triques)** üìÖ **PLANNIFI√â**

#### **Issue #21 : Parser GEDCOM minimal ‚Üí mod√®le**
- **Objectif** : Import de donn√©es GEDCOM de base
- **Acceptation** : importer INDI/FAM de base ; tests unitaires

#### **Issue #22 : √âcriture GWB minimal**
- **Objectif** : Export vers format GWB
- **Acceptation** : produire structure GWB simple ; parit√© structurelle

#### **Issue #23 : √âv√©nements ged2gwb**
- **Objectif** : Support des √©v√©nements dans ged2gwb
- **Acceptation** : parit√© sur √©v√©nements ; tests de r√©gression

#### **Issue #24 : Familles ged2gwb**
- **Objectif** : Support des familles dans ged2gwb
- **Acceptation** : parit√© sur familles ; tests de r√©gression

#### **Issue #25 : Notes/sources ged2gwb**
- **Objectif** : Support des m√©tadonn√©es dans ged2gwb
- **Acceptation** : parit√© sur notes/sources ; tests de r√©gression

#### **Issue #26 : Encodage ged2gwb**
- **Objectif** : Gestion des caract√®res sp√©ciaux dans ged2gwb
- **Acceptation** : parit√© sur encodage ; tests de r√©gression

#### **Issue #27 : Diff GWB (comparateur)**
- **Objectif** : Outil de validation pour ged2gwb
- **Acceptation** : outil qui met en √©vidence diff√©rences s√©mantiques

#### **Issue #28 : Switch CLI/API ged2gwb sur impl Python**
- **Objectif** : Migration progressive ged2gwb
- **Acceptation** : flag env/CLI pour choisir Python ou OCaml ; default=OCaml

### **6) Services analytiques (ex√©cutables OCaml: consang, connex‚Ä¶)** üìÖ **PLANNIFI√â**

#### **Issue #29 : Tests de caract√©risation (entr√©es/sorties)**
- **Objectif** : Validation des services analytiques
- **Acceptation** : fixtures + snapshots ; budgets perf

#### **Issue #30 : Impl Python consanguinit√© (algorithmes + tests props)**
- **Objectif** : Calcul de consanguinit√© en Python
- **Acceptation** : parit√© chiffr√©e sur fixtures

#### **Issue #31 : Impl Python connexit√©**
- **Objectif** : Calcul de connexit√© en Python
- **Acceptation** : parit√© chiffr√©e sur fixtures

#### **Issue #32 : Switch CLI/API pour ces services**
- **Objectif** : Migration des services analytiques
- **Acceptation** : flag de bascule ; doc utilisateur

### **7) Migration du serveur HTTP gwd (par groupes de routes)** üìÖ **PLANNIFI√â**

#### **Issue #33 : Inventaire routes gwd (+ params, auth, headers)**
- **Objectif** : Cartographie des fonctionnalit√©s web
- **Acceptation** : doc table routes ; priorisation

#### **Issue #34 : Groupe 1 routes "lecture" (ex: fiche individu)**
- **Objectif** : Migration des routes de consultation
- **Acceptation** : r√©ponses identiques (HTML/JSON) sur fixtures

#### **Issue #35 : Groupe 2 routes (r√©p√©ter par groupes fonctionnels)**
- **Objectif** : Migration des routes de groupe 2
- **Acceptation** : parit√© ; benchs ; logs structur√©s

#### **Issue #36 : Groupe N routes (r√©p√©ter par groupes fonctionnels)**
- **Objectif** : Migration des routes de groupe N
- **Acceptation** : parit√© ; benchs ; logs structur√©s

#### **Issue #37 : Proxy de compatibilit√© URL + redirections**
- **Objectif** : Maintien de la compatibilit√© des liens
- **Acceptation** : liens historiques non cass√©s

### **8) Observabilit√©, qualit√© et distribution** üìÖ **PLANNIFI√â**

#### **Issue #38 : Logs structur√©s + correlation id**
- **Objectif** : Observabilit√© et debugging
- **Acceptation** : format JSON, niveau, docs extraction

#### **Issue #39 : Metrics Prometheus (si utile)**
- **Objectif** : Monitoring des performances
- **Acceptation** : endpoint `/metrics` ; compteurs de base

#### **Issue #40 : Packaging release (versioning, changelog)**
- **Objectif** : Distribution du projet
- **Acceptation** : tags semver, CHANGELOG, build wheel

#### **Issue #41 : Doc utilisateur + API (OpenAPI/Jinja2)**
- **Objectif** : Documentation compl√®te
- **Acceptation** : doc up-to-date ; exemples CLI/API

### **9) D√©commission progressif OCaml** üìÖ **PLANNIFI√â**

#### **Issue #42 : Supprimer le recours au bridge pour gwb2ged**
- **Objectif** : Finalisation de la migration gwb2ged
- **Acceptation** : flag par d√©faut sur Python ; tests verts ; doc mise √† jour

#### **Issue #43 : Supprimer le recours au bridge pour ged2gwb**
- **Objectif** : Finalisation de la migration ged2gwb
- **Acceptation** : flag par d√©faut sur Python ; tests verts ; doc mise √† jour

#### **Issue #44 : Supprimer le recours au bridge pour consang/connex**
- **Objectif** : Finalisation de la migration des services analytiques
- **Acceptation** : flag par d√©faut sur Python ; tests verts ; doc mise √† jour

#### **Issue #45 : Supprimer le recours au bridge pour routes migr√©es**
- **Objectif** : Finalisation de la migration des routes web
- **Acceptation** : flag par d√©faut sur Python ; tests verts ; doc mise √† jour

## üèóÔ∏è **Architecture Technique**

### **Pattern Strangler Fig**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      GENE-WEB PYTHON                        ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îÇ
‚îÇ    ‚îÇ    CLI      ‚îÇ  ‚îÇ     API     ‚îÇ  ‚îÇ   WEB UI    ‚îÇ        ‚îÇ
‚îÇ    ‚îÇ   (Typer)   ‚îÇ  ‚îÇ  (FastAPI)  ‚îÇ  ‚îÇ  (Future)   ‚îÇ        ‚îÇ
‚îÇ    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îÇ
‚îÇ    ‚îÇ   Python    ‚îÇ  ‚îÇ   Python    ‚îÇ  ‚îÇ   Python    ‚îÇ        ‚îÇ
‚îÇ    ‚îÇ   Native    ‚îÇ  ‚îÇ   Native    ‚îÇ  ‚îÇ   Native    ‚îÇ        ‚îÇ
‚îÇ    ‚îÇ   gwb2ged   ‚îÇ  ‚îÇ   ged2gwb   ‚îÇ  ‚îÇ   gwd       ‚îÇ        ‚îÇ
‚îÇ    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îÇ
‚îÇ    ‚îÇ   Bridge    ‚îÇ  ‚îÇ   Bridge    ‚îÇ  ‚îÇ   Bridge    ‚îÇ        ‚îÇ
‚îÇ    ‚îÇ   OCaml     ‚îÇ  ‚îÇ   OCaml     ‚îÇ  ‚îÇ   OCaml     ‚îÇ        ‚îÇ
‚îÇ    ‚îÇ   gwb2ged   ‚îÇ  ‚îÇ   ged2gwb   ‚îÇ  ‚îÇ   gwd       ‚îÇ        ‚îÇ
‚îÇ    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                    GENE-WEB OCAML                           ‚îÇ
‚îÇ    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îÇ
‚îÇ    ‚îÇ   gwb2ged   ‚îÇ  ‚îÇ   ged2gwb   ‚îÇ  ‚îÇ     gwd     ‚îÇ        ‚îÇ
‚îÇ    ‚îÇ   (OCaml)   ‚îÇ  ‚îÇ   (OCaml)   ‚îÇ  ‚îÇ   (OCaml)   ‚îÇ        ‚îÇ
‚îÇ    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### **Structure du Projet**
```
geneweb_python/
‚îú‚îÄ‚îÄ geneweb/                   # Code OCaml original
‚îÇ   ‚îú‚îÄ‚îÄ bin/
‚îÇ   ‚îú‚îÄ‚îÄ distribution/
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ code/                      # Code Python
‚îÇ   ‚îú‚îÄ‚îÄ src/geneweb/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ adapters/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cli/           # Interface ligne de commande
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ http/          # Interface web API
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ocaml_bridge/  # Pont vers OCaml
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ domain/            # Logique m√©tier
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ infrastructure/    # Infrastructure technique
‚îÇ   ‚îú‚îÄ‚îÄ tests/
‚îÇ   ‚îú‚îÄ‚îÄ pyproject.toml
‚îÇ   ‚îî‚îÄ‚îÄ README.md
‚îî‚îÄ‚îÄ docs/
    ‚îú‚îÄ‚îÄ PRESENTATION_ORAL.md
    ‚îú‚îÄ‚îÄ PLAN_MIGRATION_COMPLET.md
    ‚îî‚îÄ‚îÄ adr/
        ‚îî‚îÄ‚îÄ 0001-strangler-fig.md
```

## üîß **Technologies Utilis√©es**

### **Python**
- **Typer** : CLI moderne et intuitive
- **FastAPI** : API web performante
- **Pytest** : Tests unitaires et d'int√©gration
- **Ruff** : Linting et formatting
- **MyPy** : V√©rification de types statiques

### **OCaml**
- **Dune** : Build system
- **OPAM** : Gestionnaire de paquets
- **Binaires existants** : gwb2ged, ged2gwb, gwd

### **DevOps**
- **GitHub Actions** : CI/CD
- **Pre-commit** : Hooks de qualit√©
- **Docker** : Containerisation (future)

## üìä **M√©triques de Succ√®s**

### **Phase 1 : Bridge (Termin√©e)**
- ‚úÖ **Parit√© fonctionnelle** : gwb2ged Python = gwb2ged OCaml
- ‚úÖ **Performance** : < 10% de diff√©rence
- ‚úÖ **Stabilit√©** : 0 crash, erreurs g√©r√©es

### **Phase 2 : Impl√©mentation Native**
- üéØ **Performance** : ‚â• 90% de la performance OCaml
- üéØ **M√©moire** : ‚â§ 110% de la consommation OCaml
- üéØ **Stabilit√©** : 0 r√©gression fonctionnelle

### **Phase 3 : Production**
- üéØ **Uptime** : 99.9%
- üéØ **Latence** : < 100ms pour les op√©rations simples
- üéØ **Throughput** : ‚â• 1000 requ√™tes/minute

## üöÄ **Prochaines √âtapes**

### **Imm√©diat (Semaine 1)**
1. **Issue #9** : Fixtures d'entr√©e GWB
2. **Issue #10** : Snapshots GEDCOM
3. **Issue #11** : Benchmarks de base

### **Court terme (Semaine 2-3)**
1. **Issue #12** : Mod√®les de domaine
2. **Issue #13** : Lecture GWB minimal
3. **Issue #14** : S√©rialisation GEDCOM minimal

### **Moyen terme (Mois 1-2)**
1. **Issues #15-20** : Portage complet gwb2ged
2. **Issues #21-28** : Portage complet ged2gwb
3. **Issues #29-32** : Services analytiques

### **Long terme (Mois 3-6)**
1. **Issues #33-37** : Migration serveur HTTP
2. **Issues #38-41** : Observabilit√© et distribution
3. **Issues #42-45** : D√©commission OCaml

## üìù **Notes Importantes**

### **Risques Identifi√©s**
- **Performance** : Python peut √™tre plus lent qu'OCaml
- **M√©moire** : Consommation potentiellement plus √©lev√©e
- **Compatibilit√©** : Risque de r√©gression fonctionnelle

### **Mitigations**
- **Tests exhaustifs** : Parit√© fonctionnelle garantie
- **Profiling continu** : Monitoring des performances
- **Rollback** : Possibilit√© de revenir √† OCaml si n√©cessaire

### **D√©pendances**
- **OCaml** : Doit rester fonctionnel pendant la transition
- **Bases de donn√©es** : Compatibilit√© avec les formats existants
- **Utilisateurs** : Formation et support n√©cessaires

## üéâ **Conclusion**

Ce plan de migration utilise le pattern **Strangler Fig** pour une transition progressive et s√©curis√©e. Chaque issue est atomique et testable, garantissant la stabilit√© et la qualit√© du syst√®me final.

La documentation compl√®te est disponible dans `docs/PRESENTATION_ORAL.md` et les d√©cisions architecturales dans `docs/adr/0001-strangler-fig.md`.
